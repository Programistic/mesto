(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{Mw:()=>L,vD:()=>y,rg:()=>g,QK:()=>k});var n=function(){function e(t,n){var r,i,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(){g.src=o._link,k.textContent=o._name,g.alt=o._alt},(r="_initialisePopupDisplay")in this?Object.defineProperty(this,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[r]=i,this._cardTemplate=document.querySelector(n).content.querySelector(".card"),this._name=t.name,this._link=t.link,this._alt=t.alt}var n,r;return n=e,(r=[{key:"_handleDeleteCard",value:function(){this._newCard.remove()}},{key:"_handleLikeButton",value:function(){this._likeButton.classList.toggle("card__button-like_liked")}},{key:"createCard",value:function(){return this._newCard=this._cardTemplate.cloneNode(!0),this._newCardTitle=this._newCard.querySelector(".card__title"),this._newCardImage=this._newCard.querySelector(".card__image"),this._newCardTitle.textContent=this._name,this._newCardImage.src=this._link,this._newCardImage.alt=this._alt,this._likeButton=this._newCard.querySelector(".card__button-like"),this._setEventListeners(),this._newCard}},{key:"_setEventListeners",value:function(){var e=this;this._newCard.querySelector(".card__button-delete").addEventListener("click",(function(){e._handleDeleteCard()})),this._newCardImage.addEventListener("click",(function(){e._initialisePopupDisplay(),L(y)})),this._likeButton.addEventListener("click",(function(){e._handleLikeButton()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._form.querySelector(this._settings.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),n.textContent=t,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._settings.inactiveButtonClass):this._buttonElement.classList.remove(this._settings.inactiveButtonClass)}},{key:"resetInputError",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o=document.querySelector(".profile"),a=o.querySelector(".profile__user-name"),s=o.querySelector(".profile__user-info"),u=o.querySelector(".profile__button-edit"),l=o.querySelector(".profile__button-add"),c=document.querySelector(".popup_role_edit"),_=c.querySelector(".form"),d=c.querySelector(".form__input_role_user-name"),p=c.querySelector(".form__input_role_user-info"),f=(c.querySelector(".form__button-save"),document.querySelector(".popup_role_create")),m=f.querySelector(".form"),h=f.querySelector(".form__input_role_place-name"),v=f.querySelector(".form__input_role_place-image"),y=(f.querySelector(".form__button-create"),document.querySelector(".popup_role_image-display")),g=y.querySelector(".popup__image"),k=y.querySelector(".popup__image-caption"),b=document.querySelector(".cards"),S={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},E=new i(S,_),C=new i(S,m);function w(e){b.prepend(function(e){return new n(e,".template-card").createCard()}(e))}function L(e){document.addEventListener("keydown",B),e.classList.add("popup_opened")}function q(e){document.removeEventListener("keydown",B),e.classList.remove("popup_opened")}function I(e){(e.target===e.currentTarget||e.target.classList.contains("popup__button-close"))&&q(document.querySelector(".popup_opened"))}function B(e){"Escape"===e.key&&q(document.querySelector(".popup_opened"))}function j(){h.value="",v.value=""}[{name:"Альгарробо",link:"./images/Алгаллробо.jpg",alt:"Деревянный мост в городе Альгарробо в Чили"},{name:"Верона",link:"./images/Верона.jpg",alt:"Лес в провинции Верона в Италии"},{name:"Амстердам",link:"./images/Амстердам.jpg",alt:"Один из каналов в Амстердаме"},{name:"Бад-Пирмонт",link:"./images/Бад-Пирмонт.jpg",alt:"Лес в окрестностях города Бад-Пирмонт в Германии"},{name:"Маттерхорн",link:"./images/Маттерхорн.jpg",alt:"Вид на гору Маттерхорн в Швейцарии"},{name:"Домбай",link:"./images/Домбай.png",alt:"Домбай"}].forEach((function(e){w(e)})),E.enableValidation(),C.enableValidation(),u.addEventListener("click",(function(){E.resetInputError(),d.value=a.textContent,p.value=s.textContent,E.toggleButtonState(),L(c)})),l.addEventListener("click",(function(){C.resetInputError(),j(),C.toggleButtonState(),L(f)})),c.addEventListener("mousedown",I),f.addEventListener("mousedown",I),y.addEventListener("mousedown",I),_.addEventListener("submit",(function(e){e.preventDefault(),a.textContent=d.value,s.textContent=p.value,q(c)})),m.addEventListener("submit",(function(e){e.preventDefault(),w({name:h.value,link:v.value,alt:h.value}),j(),q(f)}))})();